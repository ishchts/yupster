# .github/workflows/telegram-weekday.yml
name: –£—Ç—Ä–µ–Ω–Ω–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ Telegram

on:
  schedule:
    - cron: '0 9 * * *'  # –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 9:00 —É—Ç—Ä–∞ –ø–æ UTC
  workflow_dispatch:  # –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é

jobs:
  morning_message:
    runs-on: ubuntu-latest
    steps:
      - name: –ü–æ–ª—É—á–∞–µ–º –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏
        id: weekday
        run: echo "day=$(date +%A)" >> "$GITHUB_OUTPUT"

      - name: –§–æ—Ä–º–∏—Ä—É–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
        id: message
        run: |
          case "${{ steps.weekday.outputs.day }}" in
            Monday|Tuesday|Wednesday|Thursday)
              echo "text=–†–∞–±–æ—á–∏–π –¥–µ–Ω—å, –¥–µ—Ä–∂–∏—Å—å!" >> "$GITHUB_OUTPUT"
              ;;
            Friday)
              echo "text=–ü—è—Ç–Ω–∏—Ü–∞! –°–∫–æ—Ä–æ –≤—ã—Ö–æ–¥–Ω—ã–µ üéâ" >> "$GITHUB_OUTPUT"
              ;;
            Saturday|Sunday)
              echo "text=–í—ã—Ö–æ–¥–Ω–æ–π! –û—Ç–¥—ã—Ö–∞–π üòé" >> "$GITHUB_OUTPUT"
              ;;
          esac

      - name: –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –≤ Telegram
        env:
          TOKEN: ${{ secrets.TELEGRAM_TOKEN }}
          CHAT_ID: ${{ secrets.TELEGRAM_CHAT_ID }}
          TEXT: ${{ steps.message.outputs.text }}
        run: |
          curl -s -X POST "https://api.telegram.org/bot$TOKEN/sendMessage" \
            -d chat_id="$CHAT_ID" \
            -d text="$TEXT"